{"version":3,"file":"static/js/Profile.251c8daf.chunk.js","mappings":"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","sources":["webpack://client/./src/components/Buttons/ButtonBookmark/ButtonBookmark.module.scss?34cc","components/Buttons/ButtonBookmark/index.tsx","webpack://client/./src/components/ArticlePreview/ArticlePreview.module.scss?a907","components/ArticlePreview/index.tsx","helpers/viewsSum.ts","pages/Article/convertDate.ts","redux/services/user.ts","webpack://client/./src/pages/Profile/Profile.module.scss?292a","pages/Profile/index.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ButtonBookmark_root__80P26\"};","import React from 'react';\r\n\r\nimport styles from './ButtonBookmark.module.scss';\r\n\r\nexport const ButtonBookmark: React.FC = () => {\r\n    const [bookmark, setBookmark] = React.useState(false);\r\n\r\n    return (\r\n        <button className={styles.root} onClick={() => setBookmark(!bookmark)}>\r\n            <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"24\"\r\n                height=\"24\"\r\n                fill=\"currentColor\"\r\n                viewBox=\"0 0 24 24\">\r\n                {bookmark ? (\r\n                    <g\r\n                        id=\"favorite_24__Page-2\"\r\n                        stroke=\"none\"\r\n                        stroke-width=\"1\"\r\n                        fill=\"none\"\r\n                        fillRule=\"evenodd\">\r\n                        <g id=\"favorite_24__favorite_24\">\r\n                            <path id=\"favorite_24__Bounds\" d=\"M0 0h24v24H0z\"></path>\r\n                            <path\r\n                                d=\"m15.34 8.48 4.43.43c1.54.15 2.02 1.65.83 2.64l-3.47 2.88 1.29 4.7c.42 1.54-.9 2.48-2.2 1.55L12 17.7l-4.21 2.98c-1.31.92-2.63 0-2.2-1.55l1.28-4.7-3.47-2.88c-1.2-1-.72-2.5.83-2.64l4.43-.43 1.95-4.5c.6-1.4 2.17-1.4 2.78 0l1.95 4.5Z\"\r\n                                id=\"favorite_24__Mask\"\r\n                                fill=\"currentColor\"\r\n                                fillRule=\"nonzero\"></path>\r\n                        </g>\r\n                    </g>\r\n                ) : (\r\n                    <path\r\n                        fillRule=\"evenodd\"\r\n                        d=\"M12.55 4.7a.6.6 0 0 0-1.1 0L9.83 8.6a.9.9 0 0 1-.77.55l-4.13.26a.6.6 0 0 0-.35 1.05l3.26 2.86a.9.9 0 0 1 .29.9l-.94 3.84a.6.6 0 0 0 .89.66l3.47-2a.9.9 0 0 1 .9 0l3.47 2a.6.6 0 0 0 .88-.66l-.93-3.85a.9.9 0 0 1 .29-.89l3.26-2.86a.6.6 0 0 0-.35-1.05l-4.13-.26a.9.9 0 0 1-.77-.56l-1.62-3.9ZM9.78 4a2.4 2.4 0 0 1 4.44 0l1.4 3.39 3.56.23a2.4 2.4 0 0 1 1.43 4.2l-2.86 2.5.8 3.32a2.4 2.4 0 0 1-3.53 2.64L12 18.54l-3.02 1.74a2.4 2.4 0 0 1-3.54-2.64l.8-3.32-2.85-2.5a2.4 2.4 0 0 1 1.43-4.2l3.56-.23L9.78 4Z\"\r\n                        clipRule=\"evenodd\"></path>\r\n                )}\r\n            </svg>\r\n        </button>\r\n    );\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ArticlePreview_root__Vpr1l\",\"top__img\":\"ArticlePreview_top__img__xS1Ak\",\"top\":\"ArticlePreview_top__uRKvY\",\"bookmark__wrapper\":\"ArticlePreview_bookmark__wrapper__gPiUw\",\"bottom\":\"ArticlePreview_bottom__+B7+K\",\"headline\":\"ArticlePreview_headline__ClRkj\",\"author\":\"ArticlePreview_author__Wbn5K\",\"date_and_counts\":\"ArticlePreview_date_and_counts__zfox1\",\"date\":\"ArticlePreview_date__73n6H\"};","import React from 'react';\r\nimport { IoEye, IoHeart } from 'react-icons/io5';\r\nimport { Link } from 'react-router-dom';\r\nimport { convertDateShort } from '../../pages/Article/convertDate';\r\nimport { Article, Block } from '../../redux';\r\nimport { ButtonBookmark } from '../Buttons/ButtonBookmark';\r\n\r\nimport styles from './ArticlePreview.module.scss';\r\n\r\ninterface ArticlePreviewProps {\r\n    article: Article;\r\n}\r\n\r\nexport const ArticlePreview: React.FC<ArticlePreviewProps> = ({ article }) => {\r\n    const title = article.blocks.find((block: Block) => block.type === 'header')?.data.text;\r\n    const id = article._id;\r\n    const author = article.author.userName;\r\n    const cover = article.cover;\r\n    const timestamp = article.timestamp;\r\n    const viewsCount = article.views.count;\r\n    const likesCount = article.likes.count;\r\n\r\n    const date = convertDateShort(timestamp);\r\n\r\n    return (\r\n        <div className={styles.root}>\r\n            <div className={styles.top}>\r\n                <Link to={`/articles/${id}`}>\r\n                    <div\r\n                        className={styles.top__img}\r\n                        style={{ backgroundImage: `url(${cover})` }}></div>\r\n                </Link>\r\n                <div className={styles.bookmark__wrapper}>\r\n                    <ButtonBookmark />\r\n                </div>\r\n            </div>\r\n            <div className={styles.bottom}>\r\n                <Link to={`/articles/${id}`}>\r\n                    <div className={styles.headline}>{title ? title : 'Без названия'}</div>\r\n                </Link>\r\n                <Link to={`/users/${author}`}>\r\n                    <div className={`${styles.author} tp-text`}>{author}</div>\r\n                </Link>\r\n                <div className={`${styles.date_and_counts} tp-text`}>\r\n                    <span className={styles.date}>{date}</span>\r\n                    <svg\r\n                        width=\"1\"\r\n                        height=\"10\"\r\n                        viewBox=\"0 0 1 10\"\r\n                        fill=\"none\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <rect width=\"1\" height=\"10\" fill=\"currentColor\" fillOpacity=\"0.6\" />\r\n                    </svg>\r\n                    <div className=\"icon-center\">\r\n                        <IoHeart />\r\n                        <span>{likesCount}</span>\r\n                    </div>\r\n                    <div className=\"icon-center\">\r\n                        <IoEye />\r\n                        <span>{viewsCount}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","import { Article } from '../redux';\r\n\r\nexport const viewsSumCalc = (data: Article[]) =>\r\n    data.reduce((a: any, b: any) => a + b.views.count, 0);\r\n","export const convertDateLong = (timestamp: string) => {\r\n    const date = Number(timestamp);\r\n    const dateObj = new Date(date);\r\n\r\n    const monthDay = dateObj.toLocaleString('ru-Ru', { month: 'long', day: 'numeric' });\r\n    const hourMinute = dateObj.toLocaleString('ru-Ru', { hour: '2-digit', minute: '2-digit' });\r\n\r\n    return `${monthDay} в ${hourMinute}`;\r\n};\r\n\r\nexport const convertDateShort = (timestamp: string) => {\r\n    const date = Number(timestamp);\r\n    const dateObj = new Date(date);\r\n\r\n    const dateShort = dateObj.toLocaleString('ru-Ru', {\r\n        month: 'long',\r\n        day: 'numeric',\r\n    });\r\n\r\n    return dateShort;\r\n};\r\n","import { api } from './api';\r\nimport { Article } from './article';\r\n\r\nexport interface User {\r\n    userName: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    avatar: string;\r\n    isActivated: boolean;\r\n}\r\n\r\nexport interface UserResponse {\r\n    user: User;\r\n    articles: Article[];\r\n}\r\n\r\nexport const userApi = api.injectEndpoints({\r\n    endpoints: (builder) => ({\r\n        getUser: builder.query<UserResponse, any>({\r\n            query: (id) => ({\r\n                url: `users/${id}`,\r\n                method: 'GET',\r\n            }),\r\n        }),\r\n\r\n        protected: builder.mutation<{ message: string }, void>({\r\n            query: () => 'protected',\r\n        }),\r\n    }),\r\n});\r\n\r\nexport const { useGetUserQuery } = userApi;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Profile_root__Pftpd\",\"top\":\"Profile_top__aQdQm\",\"top__img\":\"Profile_top__img__IIIJ+\",\"wrapper\":\"Profile_wrapper__Nb9TZ\",\"top__info\":\"Profile_top__info__jtecE\",\"all_articles\":\"Profile_all_articles__p1xoU\",\"headline\":\"Profile_headline__dg03s\",\"all_articles__list\":\"Profile_all_articles__list__t6xN-\"};","import React from 'react';\r\nimport { IoDocument, IoEye } from 'react-icons/io5';\r\nimport { useParams } from 'react-router-dom';\r\nimport { ButtonLike } from '../../components/Buttons/ButtonLike';\r\nimport { useAuth } from '../../hooks/useAuth';\r\nimport { useGetUserQuery } from '../../redux/services/user';\r\nimport { Article } from '../../redux/services/article';\r\n\r\nimport styles from './Profile.module.scss';\r\nimport { ArticlePreview } from '../../components/ArticlePreview';\r\nimport { viewsSumCalc } from '../../helpers/viewsSum';\r\nimport { Avatar } from '../../components/Avatar';\r\n\r\nconst Profile: React.FC = () => {\r\n    const { id } = useParams();\r\n\r\n    const { data, isLoading } = useGetUserQuery(id);\r\n\r\n    if (!data) return <h3>Загрузка...</h3>;\r\n\r\n    const avatar = data.user.avatar;\r\n    const userName = data?.user.userName;\r\n    const articlesCount = data?.articles.length;\r\n    const views = viewsSumCalc(data.articles);\r\n\r\n    const articles = data?.articles.map((article: Article, id) => (\r\n        <ArticlePreview article={article} key={id} />\r\n    ));\r\n\r\n    return (\r\n        <div className={styles.root}>\r\n            <div className={styles.top}>\r\n                <Avatar imageSrc={avatar} width={200} />\r\n                <div className={styles.wrapper}>\r\n                    <div className={styles.top__info}>\r\n                        <h2 className={styles.info__headline}>{userName}</h2>\r\n                        <div className={styles.info__count_articles}></div>\r\n                        <div className=\"icon-center\">\r\n                            <IoDocument />\r\n                            <span>{articlesCount} статей</span>\r\n                        </div>\r\n                        <div className=\"icon-center\">\r\n                            <IoEye />\r\n                            <span>{views} просмотров</span>\r\n                        </div>\r\n                    </div>\r\n                    {/* <ButtonLike /> */}\r\n                </div>\r\n            </div>\r\n            <section className=\"articles\">\r\n                <h4 className=\"headline\">Все статьи пользователя</h4>\r\n                <div className=\"articles__list\">{articles}</div>\r\n            </section>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Profile;\r\n"],"names":["ButtonBookmark","React","bookmark","setBookmark","className","styles","onClick","xmlns","width","height","fill","viewBox","id","stroke","fillRule","d","clipRule","ArticlePreview","article","title","blocks","find","block","type","data","text","_id","author","userName","cover","timestamp","viewsCount","views","count","likesCount","likes","date","convertDateShort","to","style","backgroundImage","fillOpacity","viewsSumCalc","reduce","a","b","convertDateLong","Number","dateObj","Date","monthDay","toLocaleString","month","day","hourMinute","hour","minute","useGetUserQuery","api","endpoints","builder","getUser","query","url","method","protected","mutation","useParams","isLoading","avatar","user","articlesCount","articles","length","map","Avatar","imageSrc"],"sourceRoot":""}