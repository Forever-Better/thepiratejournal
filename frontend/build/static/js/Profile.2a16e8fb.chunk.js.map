{"version":3,"file":"static/js/Profile.2a16e8fb.chunk.js","mappings":"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","sources":["webpack://client/./src/pages/Profile/Profile.module.scss?292a","pages/Profile/UploadAvatar/index.tsx","pages/Profile/index.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Profile_root__iM9Le\",\"wrapper\":\"Profile_wrapper__7MEo0\",\"top\":\"Profile_top__U1M8x\",\"top__img\":\"Profile_top__img__5esW3\",\"top__wrapper\":\"Profile_top__wrapper__MmR3X\",\"top__info\":\"Profile_top__info__hLcow\",\"info__headline\":\"Profile_info__headline__iAr-x\",\"info__counters\":\"Profile_info__counters__SMLsX\",\"location\":\"Profile_location__LqTmA\",\"signupDate\":\"Profile_signupDate__klSWC\",\"tabList\":\"Profile_tabList__oMu9M\",\"navLink\":\"Profile_navLink__4sKCQ\",\"tabLabel\":\"Profile_tabLabel__rVqK5\",\"active\":\"Profile_active__vIABc\"};","import { useEffect, useRef, useState } from 'react';\r\nimport { Button } from '../../../components';\r\nimport { useUploadAvatarMutation } from '../../../redux';\r\n\r\nexport const UploadAvatar = () => {\r\n    const filePicker = useRef<HTMLInputElement>(null);\r\n    const [selectedFile, setSelectedFile] = useState();\r\n\r\n    const [uploadAvatar] = useUploadAvatarMutation();\r\n\r\n    const handlePick = () => {\r\n        filePicker.current?.click();\r\n    };\r\n\r\n    const handleChange = (event: any) => {\r\n        setSelectedFile(event.target.files[0]);\r\n    };\r\n\r\n    useEffect(() => {\r\n        const handleUpload = async () => {\r\n            if (!selectedFile) {\r\n                return alert('Пожалуйста выберите изображение');\r\n            }\r\n\r\n            const formData = new FormData();\r\n            formData.append('image', selectedFile);\r\n\r\n            uploadAvatar(formData);\r\n        };\r\n\r\n        if (selectedFile) {\r\n            handleUpload();\r\n        }\r\n    }, [selectedFile, uploadAvatar]);\r\n\r\n    return (\r\n        <div>\r\n            <Button onClick={handlePick} variant=\"filledTonal\">\r\n                Изменить аватар\r\n            </Button>\r\n            <input\r\n                ref={filePicker}\r\n                className=\"hidden\"\r\n                type=\"file\"\r\n                onChange={handleChange}\r\n                accept=\"image/jpeg,image/png,image/webp\"\r\n                name=\"photo\"\r\n            />\r\n        </div>\r\n    );\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport { NavLink, useLocation, useParams } from 'react-router-dom';\r\nimport { useGetUserQuery, Article, Draft } from '../../redux';\r\nimport { convertDateDayMonthYear } from '../../helpers';\r\nimport { DraftPreview, CreateModule, Avatar, ArticlePreview, Overlay } from '../../components';\r\nimport { useDocTitle } from '../../hooks';\r\n\r\nimport styles from './Profile.module.scss';\r\nimport { ButtonFollow } from '../../components/Buttons/ButtonFollow';\r\nimport { UploadAvatar } from './UploadAvatar';\r\n\r\nconst navListData = [\r\n    { activeSection: 'articles', text: 'Статьи', icon: 'book' },\r\n    { activeSection: 'appreciated', text: 'Оценки', icon: 'favorite' },\r\n    { activeSection: 'bookmarks', text: 'Закладки', icon: 'bookmarks' },\r\n    { activeSection: 'drafts', text: 'Черновики', icon: 'edit_document' },\r\n];\r\n\r\nconst Profile: React.FC = () => {\r\n    const { username } = useParams();\r\n    useDocTitle(username);\r\n    const location = useLocation();\r\n\r\n    const activeSection = location.pathname.split('/')[3] ?? 'articles';\r\n\r\n    const [list, setList] = useState(activeSection ? activeSection : 'articles');\r\n\r\n    const { data, isLoading, refetch } = useGetUserQuery(username);\r\n\r\n    useEffect(() => {\r\n        setList(activeSection);\r\n    }, [activeSection]);\r\n\r\n    if (isLoading) return <Overlay />;\r\n\r\n    const user = data?.user;\r\n    const articles = data?.articles;\r\n    const isOwner = data?.isOwner;\r\n\r\n    const articlesList = articles?.map((article: Article, id) => (\r\n        <ArticlePreview article={article} key={id} />\r\n    ));\r\n    const appreciatedList = data?.appreciated?.map((article: Article, id) => (\r\n        <ArticlePreview article={article} key={id} />\r\n    ));\r\n    const bookmarksList = data?.bookmarks?.map((article: Article, id) => (\r\n        <ArticlePreview article={article} key={id} />\r\n    ));\r\n    const draftsList = data?.drafts?.map((draft: Draft, id) => (\r\n        <DraftPreview draft={draft} refetch={refetch} key={id} />\r\n    ));\r\n\r\n    const navListItems = navListData.map((item, i) => (\r\n        <li key={i}>\r\n            <NavLink\r\n                to={`/users/${username}/${item.activeSection}`}\r\n                className={({ isActive }) =>\r\n                    [\r\n                        styles.navLink,\r\n                        isActive ||\r\n                        (activeSection === 'articles' && item.activeSection === 'articles')\r\n                            ? styles.active\r\n                            : undefined,\r\n                    ]\r\n                        .filter(Boolean)\r\n                        .join(' ')\r\n                }>\r\n                <span className={styles.tabLabel}>\r\n                    <span className=\"material-symbols-outlined\">{item.icon}</span>\r\n                    {item.text}\r\n                </span>\r\n            </NavLink>\r\n        </li>\r\n    ));\r\n\r\n    const date = convertDateDayMonthYear(user?.timestamp);\r\n    return (\r\n        <div className={styles.root}>\r\n            <div className={styles.wrapper}>\r\n                <div className={styles.top}>\r\n                    <Avatar imageSrc={user?.avatar} width={110} />\r\n                    <div className={styles.top__wrapper}>\r\n                        <div className={styles.top__info}>\r\n                            <h3 className={styles.info__headline}>{user?.username}</h3>\r\n                            <div className={styles.info__counters}>\r\n                                Подписчики: <span>{data?.user.followersCount}</span>\r\n                            </div>\r\n                            <div className={styles.location}>\r\n                                <span className=\"material-symbols-outlined\">location_on</span>\r\n                                {data?.user.info.city && data?.user.info.country\r\n                                    ? `${data?.user.info.city},\r\n                                ${data?.user.info.country}`\r\n                                    : 'Пиратский корабль'}\r\n                            </div>\r\n                        </div>\r\n                        {isOwner && <UploadAvatar />}\r\n                        {!isOwner && (\r\n                            <ButtonFollow\r\n                                username={username}\r\n                                hasSubscription={data?.viewer.hasSubscription}\r\n                            />\r\n                        )}\r\n                    </div>\r\n                    <span className={styles.signupDate}>Дата регистрации: {date}</span>\r\n                </div>\r\n                <section className={`${styles.articlesSection} articles`}>\r\n                    <nav>\r\n                        <ul className={styles.tabList}>\r\n                            {isOwner ? navListItems : [navListItems[0], navListItems[1]]}\r\n                        </ul>\r\n                    </nav>\r\n                    {list === 'articles' && (\r\n                        <div className=\"articles__list\">\r\n                            {articlesList?.length !== 0\r\n                                ? articlesList\r\n                                : isOwner && <CreateModule create />}\r\n                        </div>\r\n                    )}\r\n                    {list === 'appreciated' &&\r\n                        (appreciatedList?.length !== 0 ? (\r\n                            <div className=\"appreciated__list\">{appreciatedList}</div>\r\n                        ) : (\r\n                            isOwner && (\r\n                                <div className=\"articles__list\">\r\n                                    <CreateModule find />\r\n                                </div>\r\n                            )\r\n                        ))}\r\n                    {list === 'bookmarks' &&\r\n                        (bookmarksList?.length !== 0 ? (\r\n                            <div className=\"appreciated__list\">{bookmarksList}</div>\r\n                        ) : (\r\n                            isOwner && (\r\n                                <div className=\"articles__list\">\r\n                                    <CreateModule find />\r\n                                </div>\r\n                            )\r\n                        ))}\r\n                    {list === 'drafts' && (\r\n                        <div className=\"articles__list\">\r\n                            {draftsList}\r\n                            <CreateModule draft />\r\n                        </div>\r\n                    )}\r\n                </section>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Profile;\r\n"],"names":["UploadAvatar","filePicker","useRef","useState","selectedFile","setSelectedFile","useUploadAvatarMutation","uploadAvatar","useEffect","handleUpload","alert","formData","FormData","append","onClick","current","click","variant","ref","className","type","onChange","event","target","files","accept","name","navListData","activeSection","text","icon","username","useParams","useDocTitle","useLocation","pathname","split","list","setList","useGetUserQuery","data","isLoading","refetch","user","articles","isOwner","articlesList","map","article","id","appreciatedList","appreciated","bookmarksList","bookmarks","draftsList","drafts","draft","navListItems","item","i","to","isActive","styles","undefined","filter","Boolean","join","date","convertDateDayMonthYear","timestamp","imageSrc","avatar","width","followersCount","info","city","country","ButtonFollow","hasSubscription","viewer","length","create","find"],"sourceRoot":""}